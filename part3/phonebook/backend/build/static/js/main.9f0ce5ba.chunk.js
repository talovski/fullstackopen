(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(1),r=t(15),i=t.n(r),a=(t(21),t(3)),s=function(e){var n=e.filter,t=e.handleFilterChange;return Object(o.jsxs)("div",{children:["show filter with: ",Object(o.jsx)("input",{value:n,onChange:t})]})},u=t(6),f=t(4),h=t.n(f),b="/api/persons",l=function(){return h.a.get(b).then((function(e){return e.data}))},d=function(e){return h.a.post(b,e).then((function(e){return e.data}))},j=function(e){return h.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},m=function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){var n=e.persons,t=e.setPersons,c=e.newName,r=e.newNumber,i=e.setNewName,a=e.setNewNumber,s=e.handleNameChange,f=e.handleNumberChange,h=e.setNotification;return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o={name:c,number:r};if(n.some((function(e){return e.name===c}))){var s="".concat(c," is already in the phonebook. Wanna change?");if(window.confirm(s)){var f=n.find((function(e){return e.name===c})),b=f.id,l=Object(u.a)(Object(u.a)({},f),{},{number:r});m(b,l).then((function(e){t(n.map((function(n){return n.id!==b?n:e}))),h("Updated phone for ".concat(l.name)),setTimeout((function(){h(null)}),6e3)}))}i(""),a("")}else d(o).then((function(e){t(n.concat(e)),h("Added ".concat(c," with ").concat(r," to the phonebook")),setTimeout((function(){h(null)}),6e3),i(""),a("")})).catch((function(e){h("".concat(c," was added to the phonebook")),setTimeout((function(){h(null)}),6e3)}))},children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:c,onChange:s}),"number: ",Object(o.jsx)("input",{value:r,onChange:f})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.person,t=e.setPersons,c=e.persons,r=e.setNotification,i=n.name,a=n.id,s="Are you sure you want to delete ".concat(i," from the phonebook?");return Object(o.jsx)("button",{value:n.id,onClick:function(){window.confirm(s)&&j(a).then((function(){t(c.filter((function(e){return e.id!==a}))),r("".concat(n.name," was removed from the phonebook")),setTimeout((function(){r(null)}),6e3)})).catch((function(e){r("".concat(n.name," was already removed from the phonebook")),setTimeout((function(){r(null)}),6e3),t(c.filter((function(e){return e.id!==a})))}))},children:"remove"})},v=function(e){var n=e.person,t=e.setPersons,c=e.persons,r=e.setNotification;return Object(o.jsxs)("li",{children:[" ",n.name," ",n.number," ",Object(o.jsx)(O,{person:n,persons:c,setPersons:t,setNotification:r})]})},w=function(e){var n=e.peopleToShow,t=e.setPersons,c=e.persons,r=e.setNotification;return Object(o.jsx)("ul",{children:n.map((function(e){return Object(o.jsx)(v,{person:e,setPersons:t,persons:c,setNotification:r},e.id)}))})},N=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"notification",children:n})},x=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],i=Object(c.useState)(""),u=Object(a.a)(i,2),f=u[0],h=u[1],b=Object(c.useState)(""),d=Object(a.a)(b,2),j=d[0],m=d[1],O=Object(c.useState)(""),v=Object(a.a)(O,2),x=v[0],g=v[1],k=Object(c.useState)(""),C=Object(a.a)(k,2),P=C[0],S=C[1];Object(c.useEffect)((function(){l().then((function(e){r(e)}))}),[]);var T=t.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())}));return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(N,{message:P}),Object(o.jsx)(s,{filter:x,handleFilterChange:function(e){return g(e.target.value)}}),Object(o.jsx)("h3",{children:"Add new"}),Object(o.jsx)(p,{persons:t,setPersons:r,newName:f,newNumber:j,setNewName:h,setNewNumber:m,handleNameChange:function(e){return h(e.target.value)},handleNumberChange:function(e){return m(e.target.value)},notification:P,setNotification:S}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(w,{peopleToShow:T,setPersons:r,persons:t,setNotification:S})]})};i.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.9f0ce5ba.chunk.js.map