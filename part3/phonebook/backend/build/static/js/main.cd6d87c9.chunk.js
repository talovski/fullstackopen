(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(1),c=t(15),a=t.n(c),i=(t(21),t(3)),s=function(e){var n=e.filter,t=e.handleFilterChange;return Object(o.jsxs)("div",{children:["show filter with: ",Object(o.jsx)("input",{value:n,onChange:t})]})},u=t(6),f=t(4),l=t.n(f),d="http://localhost:3001/api/persons",h=function(){return l.a.get(d).then((function(e){return e.data}))},b=function(e){return l.a.post(d,e).then((function(e){return e.data}))},j=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},m=function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){var n=e.persons,t=e.setPersons,r=e.newName,c=e.newNumber,a=e.setNewName,i=e.setNewNumber,s=e.handleNameChange,f=e.handleNumberChange,l=e.setNotification;return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o={name:r,number:c};if(void 0===n.name&&void 0===n.number)return window.alert("Please, add name and number");if(n.some((function(e){return e.name===r}))){var s="".concat(r," is already in the phonebook. Wanna change?");if(window.confirm(s)){var f=n.find((function(e){return e.name===r})),d=f.id;console.log("Message from AddPerson",d);var h=Object(u.a)(Object(u.a)({},f),{},{number:c});m(d,h).then((function(e){t(n.map((function(n){return n.id!==d?n:e}))),l("Updated phone for ".concat(h.name)),setTimeout((function(){l(null)}),6e3)}))}a(""),i("")}else b(o).then((function(e){t(n.concat(e)),l("Added ".concat(r," with ").concat(c," to the phonebook")),setTimeout((function(){l(null)}),6e3),a(""),i("")})).catch((function(e){l("".concat(r," was added to the phonebook")),setTimeout((function(){l(null)}),6e3)}))},children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:r,onChange:s}),"number: ",Object(o.jsx)("input",{value:c,onChange:f})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.person,t=e.setPersons,r=e.persons,c=e.setNotification,a=n.name,i=n.id;console.log("Message from RemovePerson",n.id);var s="Are you sure you want to delete ".concat(a," from the phonebook?");return Object(o.jsx)("button",{value:n.id,onClick:function(){window.confirm(s)&&j(i).then((function(){t(r.filter((function(e){return e.id!==i}))),c("".concat(n.name," was removed from the phonebook")),setTimeout((function(){c(null)}),6e3)})).catch((function(e){c("".concat(n.name," was already removed from the phonebook")),setTimeout((function(){c(null)}),6e3),t(r.filter((function(e){return e.id!==i})))}))},children:"remove"})},v=function(e){var n=e.person,t=e.setPersons,r=e.persons,c=e.setNotification;return Object(o.jsxs)("li",{children:[" ",n.name," ",n.number," ",Object(o.jsx)(O,{person:n,persons:r,setPersons:t,setNotification:c})]})},w=function(e){var n=e.peopleToShow,t=e.setPersons,r=e.persons,c=e.setNotification;return Object(o.jsx)("ul",{children:n.map((function(e){return Object(o.jsx)(v,{person:e,setPersons:t,persons:r,setNotification:c},e.id)}))})},N=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"notification",children:n})},x=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),u=Object(i.a)(a,2),f=u[0],l=u[1],d=Object(r.useState)(""),b=Object(i.a)(d,2),j=b[0],m=b[1],O=Object(r.useState)(""),v=Object(i.a)(O,2),x=v[0],g=v[1],k=Object(r.useState)(""),C=Object(i.a)(k,2),P=C[0],S=C[1];Object(r.useEffect)((function(){h().then((function(e){c(e)}))}),[]);var T=t.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())}));return console.log("peopleToShow",T),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(N,{message:P}),Object(o.jsx)(s,{filter:x,handleFilterChange:function(e){return g(e.target.value)}}),Object(o.jsx)("h3",{children:"Add new"}),Object(o.jsx)(p,{persons:t,setPersons:c,newName:f,newNumber:j,setNewName:l,setNewNumber:m,handleNameChange:function(e){return l(e.target.value)},handleNumberChange:function(e){return m(e.target.value)},notification:P,setNotification:S}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(w,{peopleToShow:T,setPersons:c,persons:t,setNotification:S})]})};a.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.cd6d87c9.chunk.js.map